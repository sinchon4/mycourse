{% load static %}

<!DOCTYPE html>
<html>
	<head>
		<script
			type="text/javascript"
			src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=7fgtimo2bw"
		></script>
		<script
			src="https://code.jquery.com/jquery-3.6.0.js"
			integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
			crossorigin="anonymous"
		></script> 
		<meta charset="EUC-KR" />
		<link rel="stylesheet" href="{% static 'home/css/home.css' %}" />
		<title>Insert title here</title>
	</head>

	<body>
		<h1><img class="logo" src={% static 'home/img/logo.png' %}>모두의 루트</h1>
		<div>
			<a href="{% url 'login' %}" id="log_in">로그인</a>
			<a href="{% url 'write' %}" id="write_post">글 쓰기 </a>
			<!-- 네이버 지도가 뿌려질 곳 !  -->
		</div>
		<br />
		<br />
		<br /><br /><br /><br /><br />

		<div id="menu">
			<a href="list_cg?category=special">
				<figure>
					<img src="{% static 'home/img/b1.png' %}" alt="" />
					<figcaption>특별한 날</figcaption>
				</figure>
			</a>
			<a href="list_cg?category=lover">
				<figure>
					<img src="{% static 'home/img/b2.png' %}" alt="" />
					<figcaption>연인과</figcaption>
				</figure>
			</a>
			<a href="list_cg?category=company">
				<figure>
					<img src="{% static 'home/img/b3.png' %}" alt="" />
					<figcaption>회식</figcaption>
				</figure>
			</a>
			<a href="list_cg?category=family">
				<figure>
					<img src="{% static 'home/img/b4.png' %}" alt="" />
					<figcaption>가족과</figcaption>
				</figure>
			</a>
			<br />
			<a href="list_cg?category=alone">
                <figure>
                    <img src="{% static 'home/img/b5.png' %}" alt="" />
				<figcaption>혼자<figcaption>
                </figure>
				
			</a>
			<a href="list_cg?category=activity">
                <figure><img src="{% static 'home/img/b6.png' %}" alt="" />
                    <figcaption>액티비티<figcaption></figure>
				
			</a>
			<a href="list_cg?category=friend">
                <figure>
                    <img src="{% static 'home/img/b7.png' %}" alt="" />
				<figcaption>친구와</figcaption>
                </figure>
				
			</a>
			<a href="list_cg?category=healing">
                <figure>
                    <img src="{% static 'home/img/b8.png' %}" alt="" />
				<figcaption>힐링</figcaption>
                </figure>
				
			</a>
		</div>

		<div id="map" style="width: 100%; height: 75vh; margin: 0 auto"></div>
	</body>

	<script>
		for (var i = 1; i < 9; i++) {}
	</script>

	<script type="text/javascript">
		$(function () {
			initMap();
		});

		function initMap() {
			var areaArr = new Array(); // 지역을 담는 배열 ( 지역명/위도경도 )
			areaArr.push(
				/*지역구 이름*/ /*위도*/ /*경도*/
				{ location: 'GN', lat: '37.4959854', lng: '127.0664091' }, // 강남구 중심좌표
				{ location: 'GD', lat: '37.5492077', lng: '127.1464824' }, // 강동구 중심좌표
				{ location: 'GB', lat: '37.6469954', lng: '127.0147158' }, // 강북구 중심좌표
				{ location: 'GS', lat: '37.5657617', lng: '126.8226561' }, // 강서구 중심좌표
				{ location: 'GA', lat: '37.4603732', lng: '126.9536086' }, // 관악구 중심좌표
				{ location: 'GJ', lat: '37.5574120', lng: '127.0796211' }, // 광진구 중심좌표
				{ location: 'GR', lat: '37.4954856', lng: '126.858121' }, // 구로구 중심좌표
				{ location: 'GC', lat: '37.4600969', lng: '126.9001546' }, // 금천구 중심좌표
				{ location: 'NW', lat: '37.6377533', lng: '127.0754623' }, // 노원구 중심좌표
				{ location: 'DB', lat: '37.6658609', lng: '127.0317674' }, // 도봉구 중심좌표
				{ location: 'DDM', lat: '37.5838012', lng: '127.0507003' }, // 동대문구 중심좌표
				{ location: 'DJ', lat: '37.4965037', lng: '126.9443073' }, // 동작구 중심좌표
				{ location: 'MP', lat: '37.5676507', lng: '126.8854549' }, // 마포구 중심좌표
				{ location: 'SDM', lat: '37.5820369', lng: '126.9356665' }, // 서대문구 중심좌표
				{ location: 'SC', lat: '37.4769528', lng: '127.0378103' }, // 서초구 중심좌표
				{ location: 'SD', lat: '37.5506753', lng: '127.0409622' }, // 성동구 중심좌표
				{ location: 'SB', lat: '37.606991', lng: '127.0232185' }, // 성북구 중심좌표
				{ location: 'SP', lat: '37.5177941', lng: '127.1127078' }, // 송파구 중심좌표
				{ location: 'YC', lat: '37.5270616', lng: '126.8561534' }, // 양천구 중심좌표
				{ location: 'YDP', lat: '37.520641', lng: '126.9139242' }, // 영등포구 중심좌표
				{ location: 'YS', lat: '37.5311008', lng: '126.9810742' }, // 용산구 중심좌표
				{ location: 'EP', lat: '37.6176125', lng: '126.9227004' }, // 은평구 중심좌표
				{ location: 'GN', lat: '37.5990998', lng: '126.9861493' }, // 종로구 중심좌표
				{ location: 'J', lat: '37.5579452', lng: '126.9941904' }, // 중구 중심좌표
				{ location: 'JN', lat: '37.598031', lng: '127.092931' } // 중랑구 중심좌표
			);

			let markers = new Array(); // 마커 정보를 담는 배열
			let infoWindows = new Array(); // 정보창을 담는 배열

			var map = new naver.maps.Map('map', {
				center: new naver.maps.LatLng(37.552758094502494, 126.98732600494576), //지도 시작 지점
				zoom: 11,
			});

			for (var i = 0; i < areaArr.length; i++) {
				// 지역을 담은 배열의 길이만큼 for문으로 마커와 정보창을 채워주자 !

				var marker = new naver.maps.Marker({
					map: map,
					title: areaArr[i].location, // 지역구 이름
					position: new naver.maps.LatLng(areaArr[i].lat, areaArr[i].lng), // 지역구의 위도 경도 넣기
				});

				/* 정보창 */
				var infoWindow = new naver.maps.InfoWindow({
					content:
						'<div style="width:200px;text-align:center;padding:10px;"><b>' +
						areaArr[i].location +
						'</b><br> - 네이버 지도 - </div>',
				}); // 클릭했을 때 띄워줄 정보 HTML 작성

				markers.push(marker); // 생성한 마커를 배열에 담는다.
				infoWindows.push(infoWindow); // 생성한 정보창을 배열에 담는다.
			}

			function getClickHandler(seq) {
				return function (e) {
					// 마커를 클릭하는 부분
					var marker = areaArr[seq]; // 클릭한 마커의 시퀀스로 찾는다.
					//console.log(marker, markers, seq)
					//infoWindow = infoWindows[seq]; // 클릭한 마커의 시퀀스로 찾는다
					console.log(marker);
					//document.write(marker.location);
					if (infoWindow.getMap()) {
						infoWindow.close();
					} else {
						infoWindow.open(map, marker); // 표출
					}
					//const res = fetch(`/list_lc?location=${market.location}`).then((res)=>res.json());
					//console.log(marker);
					window.open(`/list_lc?location=${marker.location}`);
				};
			}

			for (var i = 0, ii = markers.length; i < ii; i++) {
				//console.log(markers[i] , getClickHandler(i));
				//console.log(i);
				naver.maps.Event.addListener(markers[i], 'click', getClickHandler(i)); // 클릭한 마커 핸들러
			}
		}
	</script>
</html>
